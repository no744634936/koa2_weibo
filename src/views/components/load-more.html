<div class="margin-bottom-20 ">
    <button id="btn-load-more" type="button" class="btn btn-sm btn-lg btn-block">点击加载更多</button>
</div>


<script
  src="https://code.jquery.com/jquery-1.12.3.min.js"
  integrity="sha256-aaODHAgvwQW1bFOGXMeX+pC4PZIPsvn2h1sArYOhgXQ="
  crossorigin="anonymous"></script>
 
    

<script>

       //通过jQ的ajax来请求api数据
    var PAGE_SIZE = <%= pageSize%>
    var PAGE_NUM =  <%= pageNum%>
    var COUNT =  <%= count%>
    var $btnLoadMore = $('#btn-load-more')
    var $containerWeiboList = $('<%= containerSelector%>')
    var api = '<%= api%>'

       $(function(){
        $('#btn-load-more').click(function(){
            var nextpageNum = PAGE_NUM + 1
            $.getJSON(`${api}/${nextpageNum}`, function(data){
                
                // 更新 pageNum
                PAGE_NUM = data.pageNum

                // 是否要隐藏“加载更多”
                if (PAGE_NUM * PAGE_SIZE >= COUNT) {
                    $btnLoadMore.hide()
                }

                //渲染页面
                $containerWeiboList.append(data.html)
            })
        })
    })

</script>
